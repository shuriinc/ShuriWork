<div ng-controller="ApiDocsCtrl as vm" class="padBottom">
    <div ng-include="'/templates/apidocs/apiNav.html'"></div>
    <sspinner ng-if="!vm.loadComplete" text="Loading ..." padding="120"></sspinner>
    <div ng-show="vm.loadComplete">
        <div class="row">
            <div class="col-md-9">
                <h4>Groups</h4>
                Groups are the fundamental container entity in The API.  Groups may contain any number of any of the other entities.  Groups may also contain other groups, but there are limitations as outlined below.
                There are 4 group types that help define the system.  While all groups have the same data model, each group type has different uses and allowed members. See the Group Types section below for more information about Group Types.<br /><br />

            </div>
        </div>
        <div class="row">
            <div class="col-md-9 nudge">
                <br />
                <table class="table table-condensed small">
                    <thead>
                        <tr>
                            <th class="Resource">
                                Resource
                            </th>
                            <th class="">
                                Description
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="">
                            <td class="Resource">
                                <a href="">GET groups</a>
                                <div style="margin-left:30px;">
                                    ?grpType=<span class="tokenize">[ group type ]</span>
                                </div>
                            </td>
                            <td class="">
                                Returns an array of all <a href="/APIDocs/ShowProto" target="_blank">groups</a> of the type requested and that belong in collections the user has licensed plus any others the user owns.
                                Type may be one of these: Collection, Team, or Private.
                            </td>
                        </tr>
                        <tr class="">
                            <td class="Resource">
                                <a href="#demo">GET groups</a>?ids=<span class="tokenize">[ group ids ]</span>
                            </td>
                            <td class="">
                                Returns an array of those <a href="/APIDocs/ShowProto" target="_blank">groups</a> whose ids were provided in the comma-separated list.  Max 1000 records.  Groups are fully hydrated.
                            </td>
                        </tr>
                        <tr class="">
                            <td class="Resource">
                                <a href="#demo">GET groups</a>?groups=<span class="tokenize">[ group ids ]</span>
                                <div style="margin-left:30px;">
                                    &people=<span class="tokenize">[ person ids ]</span><br />
                                    &tags=<span class="tokenize">[ tag ids ]</span><br />
                                    &touches=<span class="tokenize">[ touch ids ]</span><br />
                                    &nameBegins=<span class="tokenize">[ string ]</span><br />
                                    &fullRecord=<span class="tokenize">[ true/false ]</span><br />
                                    &updatableOnly=<span class="tokenize">[ true/false ]</span>
                                    <br />&pageSize=<span class="tokenize">[ size ]</span>&page=<span class="tokenize">[ page ]</span>
                                </div>
                            </td>
                            <td class="">
                                Returns an array of all
                                <a href="/APIDocs/ShowProto" target="_blank">groups</a> <strong>except those of type: Organization</strong> that match the filters provided and belong in collections the user has licensed or owns.
                                Groups are fully hydrated if fullRecord=true.
                            </td>
                        </tr>

                        <tr class="">
                            <td class="Resource">
                                <a href="#demo">GET organizations</a>
                                <div style="margin-left:30px;">
                                    ?groups=<span class="tokenize">[ group ids ]</span><br />
                                    &tags=<span class="tokenize">[ tag ids ]</span><br />
                                    &touches=<span class="tokenize">[ touch ids ]</span><br />
                                    &nameBegins=<span class="tokenize">[ string ]</span><br />
                                    &docTypeId=<span class="tokenize">[ userType id ]</span><br />
                                    &fullRecord=<span class="tokenize">[ true/false ]</span>
                                    <br />&page=<span class="tokenize">[ page ]</span>&pageSize=<span class="tokenize">[ size ]</span>
                                </div>

                            </td>
                            <td class="">
                                Returns an array of all <a href="/APIDocs/ShowProto" target="_blank">groups</a> of <strong>type: Organization</strong> that match the filters provided.
                                Groups are fully hydrated if fullRecord=true. Paginated.
                            </td>
                        </tr>
                        <tr class="">
                            <td class="Resource">
                                <a href="">GET myGroups</a><br />
                            </td>
                            <td class="">
                                Returns an array of all groups as <a href="/APIDocs/ShowProto" target="_blank">group browsers</a> that the user has licensed or owns.  A GroupBrowser inherits from Group and add counts by entity for that group, i.e. people, touches, etc.
                            </td>
                        </tr>
                         <tr class="">
                            <td class="Resource">
                                <a href="">GET myTeams</a>
                            </td>
                            <td class="">
                                Returns an array of all <a href="/APIDocs/ShowProto" target="_blank">groups</a> of the type Team to which the user belongs, regardless of ownership or collection.
                            </td>
                        </tr>
                         <tr class="">
                            <td class="Resource">
                                <a href="">GET collectionsForTeam</a>
                                <div style="margin-left:30px;">
                                    ?teamId=<span class="tokenize">[ team id ]</span><br />
                                </div>
                            </td>
                            <td class="">
                                Returns an array of all <a href="/APIDocs/ShowProto" target="_blank">collections</a> associated with the team id.
                            </td>
                        </tr>
                        <tr class="">
                            <td class="">
                                <a href="">GET collections</a>
                            </td>
                            <td class="">
                                Returns an array of all <a href="/APIDocs/ShowProto" target="_blank">collections</a> that the user has licensed or owns.
                            </td>
                        </tr>
                        <tr class="">
                            <td class="">
                                <a href="">GET collectionsAvailable</a>
                            </td>
                            <td class="">
                                Returns an array of all <a href="/APIDocs/ShowProto" target="_blank">collections</a> that are currently available to be licensed.
                            </td>
                        </tr>

                        <tr class="">
                            <td class="Resource">
                                <a href="">GET group?id=<span class="tokenize">[ id ]</span></a>
                            </td>
                            <td class="">
                                Returns a fully hydrated <a href="/APIDocs/ShowProto" target="_blank">group</a>, except for Collections which partially hydrate, with only the first page of People, Touches, and Groups returned.
                            </td>
                        </tr>
                        <tr class="">
                            <td class="Resource">
                                <a href="">POST groups</a>
                                <div style="margin-left:30px;">
                                    ?collectionId=<span class="tokenize">[ group id ]</span><br />
                                </div>
                            </td>
                            <td class="">
                                Create a new <a href="/APIDocs/ShowProto" target="_blank">group</a> in the collection requested or the user's private collection by default.
                                If the group id is empty a create occurs, else an update to the existing record.
                                The posted groups's relationships will be evaluated for changeType in the related entities.
                            </td>
                        </tr>
                        <tr class="">
                            <td class="Resource">
                                <a href="">DELETE group</a>
                            </td>
                            <td class="">
                                Deletes an existing <a href="/APIDocs/ShowProto" target="_blank">group</a>.  Collections may not be deleted using this resource - they have a separate DELETE resource.  The group and all of it's relationships are permanently deleted.
                            </td>
                        </tr>
                        <tr class="">
                            <td class="Resource">
                                <a href="">DELETE deletePrivateGroupDeep</a>
                            </td>
                            <td class="">
                                Deletes an existing <a href="/APIDocs/ShowProto" target="_blank">private group</a> and EVERYTHING within it that belongs to the user. The group and all of it's relationships are permanently deleted.
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <hr />

        <div class="row">
            <div class="col-md-9">
                <h4>Group Type: Collection</h4>
                Everything in The API belongs to one or more groups of type Collection.  A group of type collection may include any of the other entities including Groups of other types, but not other collections.
                Users only see things in their own collections or collections to which they have subscribed.  Each user has their own private collection
                which contains all the private items belonging to the user.   All collection types = "Demo" are provisioned at the time of registration.
                <br /><br />
                Any private group may be promoted to a shared, public collection:  either by invitation only or in the collection store.<br />&nbsp;
            </div>
            <div class="col-xs-3">
                <br />
                <div class="panel panel-info">
                    <div class="panel-heading">
                        <h4 class="panel-title">All Collections</h4>
                    </div>
                    <div class="panel-body">
                        <div ng-repeat="sub in vm.subsAvailable">
                            <div ng-if="sub.isSubscribed"><strong>{{sub.name}}</strong></div>
                            <div ng-if="!sub.isSubscribed">{{sub.name}}</div>
                        </div>
                    </div>
                    <div class="panel-footer">
                        <div class="small">
                            Resource: <span class="apiResource">
                                collectionsAvailable
                            </span>

                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-9">
                <h4>Group Type: Team</h4>
                Users may act soley as individuals or they may be members of one or more <i>teams</i>.  A Team is a Group of type Team comprised of People who are also application users. Teams are used for sharing data and
                enabling permissions.  Every entity in the API may be owned by one team and only members of that team (along with the individual owner) have update privileges on that entity.
            </div>
            <div class="col-md-3">
                <br />
                <div class="panel panel-info">
                    <div class="panel-heading">
                        <h4 class="panel-title">Your Teams</h4>
                    </div>
                    <div class="panel-body">
                        <div ng-repeat="sub in vm.myTeams">
                            <div>{{sub.name}}</div>
                        </div>
                    </div>
                    <div class="panel-footer">
                        <div class="small">
                            Resource: <span class="apiResource">
                                myTeams
                            </span>

                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-9">
                <h4>Group Type: Private</h4>
                Private Groups are arbitrary collections of any number and combination of the other entities.  Private Groups may only contain other Groups of type: Organization.
                These user-defined groups exist to provide "containers" for grouping logically related entities.
            </div>
            <div class="col-md-3">
                <br />
                <div class="panel panel-info">
                    <div class="panel-heading">
                        <h4 class="panel-title">Your Private Groups</h4>
                    </div>
                    <div class="panel-body">
                        <div ng-repeat="sub in vm.myPrivate">
                            <div>{{sub.name}}</div>
                        </div>
                        <div ng-if="vm.myPrivate.length == 0">
                            <div class="accessory">(none)</div>
                        </div>
                    </div>
                    <div class="panel-footer">
                        <div class="small">
                            Resource: <span class="apiResource">
                                groups?grpType=private
                            </span>

                        </div>

                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-9">
                <h4>Group Type: Organization</h4>
                Groups of type Organization represent any company, business, or organized entity.  People generally belong to one (sometimes more than 1) Organization.
                Contains any other entity.  May only contain groups of type Organization. Organizations, along with People and possibly Touches, comprise the subject matter of a collection.
            </div>
            <div class="col-xs-3">
            </div>

        </div>
        <hr />
        <sspinner ng-if="vm.loadingDemo" text="Getting Organizations ..." padding="120"></sspinner>
        <div ng-if="!vm.loadingDemo">
            <div id="divDemo" class="row">
                <div class="col-md-6">
                    <h4>Organization Demo</h4>
                </div>
                <div class="col-md-6" style="text-align:right;">
                    <ul class="list-unstyled list-inline"></ul>
                </div>
            </div>

            <div class="row">
                <div class="col-md-3 col-xs-12">
                    Collection
                    <select class="form-control" ng-options="item.id as item.name for item in vm.mygroups | orderBy: 'name'"
                            ng-model="vm.subId" ng-change="vm.refreshResourceUrl('organizations')"></select>

                </div>
                <div class="col-md-3 col-xs-12">
                    Name Begins
                    <input type=" text" class="form-control" ng-model="vm.nameBegins" ng-change="vm.refreshResourceUrl('organizations')" />
                </div>
                <div class="col-md-3 col-xs-12">
                    <br />
                    <input type="checkbox" ng-model="vm.fullRecord" ng-change="vm.refreshResourceUrl('organizations')" /> include full records
                </div>
                <div class="col-md-3 col-xs-12">
                    <br />
                    <button class="btn btn-primary" ng-click="vm.getResource('organizations')" style="width:200px">Get Organizations</button>
                </div>
            </div>

            <br />

            <br />
            <div class="row" ng-if="vm.results">
                <div class="col-xs-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">

                            <span id="spanJsonHead">
                                Resource: <br />
                                <input type="text" class="form-control" ng-model="vm.resourceUrl" />
                            </span>
                        </div>
                        <div class="panel-body">
                            <pre id="spanJson">{{vm.results}}</pre>
                            <span id="spanTable"></span>
                        </div>
                    </div>
                </div>
            </div>
            <br />

            <br />
        </div>
    </div>
</div>
